// # Prettier, ESLint & Lint-Staged Setup Guide

// ================================================================================
// ## STEP 0: Config Setup (dotenv & TypeScript)
// ================================================================================

// ### 0.1 Install dotenv:
// npm install dotenv

// ### 0.2 Create `src/config/index.ts`:

// ```typescript
// import { config as dotenvConfig } from "dotenv";
//
// dotenvConfig();
//
// const { PORT } = process.env;
//
// export const Config = {
//   PORT,
// };
// ```

// ### 0.3 Update `tsconfig.json` - Enable rootDir & outDir:

// ```json
// {
//   "compilerOptions": {
//     "rootDir": "./src",
//     "outDir": "./dist",
//     "module": "nodenext",
//     "target": "esnext",
//     "verbatimModuleSyntax": true
//   }
// }
// ```

// ### 0.4 Update `package.json` - Set type to module & add scripts:

// ```json
// {
//   "type": "module",
//   "scripts": {
//     "build": "tsc",
//     "dev": "tsc --watch",
//     "start": "node dist/server.js"
//   }
// }
// ```

// ### 0.5 Create `.env` file in root:
// ```
// PORT=5000
// ```

// ### 0.6 Build & Run:
// ```bash
// npm run build      # Compile TypeScript
// npm start          # Run server
// npm run dev        # Watch mode (auto-compile on changes)
// ```

// --------------------------------------------------------------------------------

// ================================================================================
// ## STEP 1: Install Dependencies
// ================================================================================

// npm install -D prettier eslint @typescript-eslint/parser @typescript-eslint/eslint-plugin lint-staged husky

// --------------------------------------------------------------------------------

// ================================================================================
// ## STEP 2: Prettier Setup
// ================================================================================

// ### 2.1 Create `.prettierrc` file in root:

// ```json
// {
//   "semi": true,
//   "singleQuote": false,
//   "tabWidth": 2,
//   "trailingComma": "es5"
// }
// ```

// ### 2.2 Create `.prettierignore` file (optional):

// ```
// dist
// node_modules
// ```

// ### 2.3 Add scripts in `package.json`:

// ```json
// "scripts": {
//   "format:check": "prettier . --check",
//   "format:fix": "prettier . --write"
// }
// ```

// --------------------------------------------------------------------------------

// ================================================================================
// ## STEP 3: ESLint Setup
// ================================================================================

// ### 3.1 Create `eslint.config.mjs` file in root:

// ```javascript
// import tsParser from "@typescript-eslint/parser";
// import tsPlugin from "@typescript-eslint/eslint-plugin";

// export default [
//   {
//     files: ["**/*.ts", "**/*.tsx", "**/*.js"],
//     ignores: ["dist", "node_modules"],
//     languageOptions: {
//       parser: tsParser,
//       ecmaVersion: "latest",
//       sourceType: "module",
//     },
//     plugins: {
//       "@typescript-eslint": tsPlugin,
//     },
//     rules: {
//       "dot-notation": "error",
//       // Add more rules as needed
//     },
//   },
// ];
// ```

// ### 3.2 Add scripts in `package.json`:

// ```json
// "scripts": {
//   "lint:check": "eslint .",
//   "lint:fix": "eslint . --fix"
// }
// ```

// --------------------------------------------------------------------------------

// ================================================================================
// ## STEP 4: Husky Setup (Git Hooks)
// ================================================================================

// ### 4.1 Initialize Husky:

// ```bash
// npx husky init
// ```

// This creates:
// - `.husky/` folder
// - `.husky/pre-commit` file

// --------------------------------------------------------------------------------

// ================================================================================
// ## STEP 5: Lint-Staged Setup
// ================================================================================

// ### 5.1 Add lint-staged config in `package.json`:

// ```json
// "lint-staged": {
//   "*.ts": [
//     "npm run format:fix",
//     "npm run lint:fix"
//   ]
// }
// ```

// ### 5.2 Update `.husky/pre-commit` file:

// ```bash
// npx lint-staged
// ```

// --------------------------------------------------------------------------------

// ================================================================================
// ## HOW IT ALL WORKS TOGETHER
// ================================================================================

// 1. Developer runs: git add . && git commit -m "message"
// 2. Husky intercepts the commit (pre-commit hook)
// 3. Husky runs: npx lint-staged
// 4. Lint-staged finds all staged .ts files
// 5. For each staged file:
//    - Runs Prettier to format code
//    - Runs ESLint to fix lint errors
// 6. If everything passes -> Commit succeeds
// 7. If anything fails -> Commit is blocked

// --------------------------------------------------------------------------------

// ================================================================================
// ## USEFUL COMMANDS
// ================================================================================

// # Check formatting (no changes)
// npm run format:check

// # Fix formatting
// npm run format:fix

// # Check lint errors (no changes)
// npm run lint:check

// # Fix lint errors
// npm run lint:fix

// --------------------------------------------------------------------------------

// ================================================================================
// ## FINAL package.json SCRIPTS SECTION
// ================================================================================

// ```json
// "scripts": {
//   "dev": "nodemon src/server.ts",
//   "format:check": "prettier . --check",
//   "format:fix": "prettier . --write",
//   "lint:check": "eslint .",
//   "lint:fix": "eslint . --fix",
//   "prepare": "husky"
// }
// ```

// ================================================================================



// ================================================================================
// ## STEP 6: Docker Setup
// ================================================================================

// ### 6.1 Create `Dockerfile` in root:

// ```dockerfile
// FROM node:22-alpine
//
// WORKDIR /usr/src/app
//
// COPY package*.json ./
//
// RUN npm install
//
// COPY . .
//
// EXPOSE 5501
//
// CMD ["npm", "run", "dev"]
// ```

// ### 6.2 Create `.dockerignore` in root:

// ```
// node_modules
// dist
// .git
// .env
// ```

// ### 6.3 Create `docker-compose.yml` in root:

// ```yaml
// version: '3.8'
// services:
//   auth-service:
//     build:
//       context: .
//       dockerfile: Dockerfile
//     ports:
//       - "5501:5501"
//     volumes:
//       - .:/usr/src/app
//       - /usr/src/app/node_modules
//     env_file:
//       - .env
//     environment:
//       - NODE_ENV=development
// ```

// --------------------------------------------------------------------------------

// ================================================================================
// ## STEP 7: Docker + Nodemon Fix (File Watching Issue)
// ================================================================================

// ### Problem:
// Docker containers mein file system events (inotify) host machine se
// container tak properly propagate nahi hote, especially Windows/Mac pe.
// Isliye nodemon restart nahi hota jab file save karte ho.

// ### 7.1 Solution 1: Legacy Watch Mode (Recommended)
// Update `package.json` dev script:

// ```json
// "scripts": {
//   "dev": "nodemon -L --exec tsx src/server.ts"
// }
// ```
// Note: `-L` flag enables legacy watch mode (polling)

// ### 7.2 Solution 2: Create `nodemon.json` in root:

// ```json
// {
//   "watch": ["src"],
//   "ext": "ts,json",
//   "legacyWatch": true,
//   "pollingInterval": 1000,
//   "exec": "tsx src/server.ts"
// }
// ```

// ### 7.3 Solution 3: Environment Variable in docker-compose.yml:

// ```yaml
// environment:
//   - CHOKIDAR_USEPOLLING=true
// ```

// --------------------------------------------------------------------------------

// ================================================================================
// ## DOCKER USEFUL COMMANDS
// ================================================================================

// # Build Docker image
// docker build -t auth-service:dev .

// # Run container with volume mount
// docker run --rm -it -v D:\Study\Mern\auth-service:/usr/src/app -v /usr/src/app/node_modules --env-file D:\Study\Mern\auth-service\.env -p 5501:5501 -e NODE_ENV=development auth-service:dev

// # Using docker-compose (recommended)
// docker-compose up --build        # Build and start
// docker-compose up -d             # Run in background
// docker-compose down              # Stop containers
// docker-compose logs -f           # View logs

// # Other useful commands
// docker image ls                  # List images
// docker ps                        # List running containers
// docker exec -it <container> sh   # Enter container shell

// ================================================================================